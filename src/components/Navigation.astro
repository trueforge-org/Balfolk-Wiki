---
import { Icon } from "@astrojs/starlight/components";
import "../styles/global.css";

type IconName = "rss" | "star" | "open-book" | "rocket" | "information" | "add-document" | "external";

type Link = {
  name: string;
  href: `/${string}` | `https://${string}`;
  icon?: IconName;
};

const links: Array<Link> = [
  { name: "Algemeen", href: "/algemeen/", icon: "information" },
  { name: "Dansen", href: "/dansen/", icon: "open-book" },
  { name: "Overige", href: "/overige/", icon: "add-document" },
];

const { pathname } = Astro.url;
---

<div class="flex flex-row gap-5 ml-8 items-center justify-center overflow-visible">
  {
    links.map((link) => {
      // Remove trailing slashes for reliable matching
      const normalizedHref = link.href.replace(/\/$/, "");
      const normalizedPath = pathname.replace(/\/$/, "");

      // Active if the current URL starts with the linkâ€™s base path
      const isActive = normalizedPath.startsWith(normalizedHref);

      return (
        <a
          class={`link-no-deco flex flex-row items-center gap-1 border-tc-primary transition-all relative z-10
            ${isActive ? "scale-110 border-b-2" : "hover:scale-110 hover:border-b-2"}`}
          href={link.href}
          data-astro-prefetch="load"
          style={`border-bottom-color: var(--sl-color-accent, #c64533)`}
        >
          <p class="font-bold text-lg max-lg:text-xs max-md:text-xs">
            {link.name}
          </p>
          {link.icon && (
            <Icon
              class="w-5 h-5 max-md:hidden max-lg:hidden text-[var(--sl-color-gray-2)]"
              name={link.icon}
            />
          )}
        </a>
      );
    })
  }

  <!-- Separator and external button -->
  <div class="h-6 w-px mx-2" style={`background-color: var(--sl-color-accent, #c64533)`} aria-hidden="true"></div>
  <a
    href="https://balfolk.nl"
    class="ml-2 inline-flex items-center px-3 py-1 rounded text-white font-bold transition-all hover:opacity-90"
    style={`background-color: var(--sl-color-accent, #c64533); gap: 0.2rem; padding-right: 0.5rem;`}
    target="_blank"
    rel="noopener noreferrer"
  >
    Balfolk.nl
    <Icon
      class="w-3 h-3 transform -translate-y-1"
      name={"external" as any}
      aria-hidden="true"
    />
    <span class="sr-only">Opens in a new tab</span>
  </a>
</div>
